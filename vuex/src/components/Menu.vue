<template>
  <header class="header__container">
    <nav class="menu__nav">
      <ul>
        <li><a href="">Homme</a></li>
        <li><a href="">Femme</a></li>
        <li><a href="">Concept</a></li>
        <li><router-link to="/faq">FAQ</router-link></li>
      </ul>
    </nav>
    <div class="logo">
      <router-link to="/">
        <svg
          class="js_logo_svg"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 756.68 146.79"
        >
          <title>logo</title>
          <g id="Calque_2" data-name="Calque 2">
            <g id="Calque_1-2" data-name="Calque 1">
              <polygon
                points="0 2.28 58.91 2.28 58.91 17.44 39.09 17.44 39.09 78.84 19.93 78.84 19.93 17.44 0 17.44 0 2.28"
              />
              <polygon
                points="133.6 2.38 133.6 78.84 114.43 78.84 114.43 46.24 86.49 46.24 86.49 78.84 67.21 78.84 67.21 2.38 86.49 2.38 86.49 30 114.43 30 114.43 2.38 133.6 2.38"
              />
              <polygon
                points="145.09 2.38 201.62 2.38 201.62 17.22 164.15 17.22 164.15 31.08 199.13 31.08 199.13 45.59 164.15 45.59 164.15 63.78 204.97 63.78 204.97 78.84 145.09 78.84 145.09 2.38"
              />
              <polygon
                points="245.57 2.38 263.76 2.38 263.76 33.57 292.36 2.38 315.31 2.38 288.24 30.76 317.48 78.84 295.93 78.84 275.46 44.19 263.76 56.42 263.76 78.84 245.57 78.84 245.57 2.38"
              />
              <path
                d="M354.61,81c-24.25,0-38-18.63-38-40.72C316.6,19.6,329.71,0,354.29,0a42.26,42.26,0,0,1,14,2.28C391.65,10.4,393.17,35.85,393.17,41c0,13.22-6.07,25.13-14.51,31.95-7.48,6.17-16.14,8-24.05,8m13.22-59.46a18.65,18.65,0,0,0-13.43-5.63c-11.59,0-18.95,10.18-18.95,24,0,18.2,10.18,24.91,19.16,24.91s18.85-6.5,19.39-22.53c.32-8-1.84-16.13-6.17-20.79"
              />
              <path
                d="M439.89,81c-24.26,0-38-18.63-38-40.72C401.87,19.6,415,0,439.56,0a42.26,42.26,0,0,1,14,2.28C476.92,10.4,478.44,35.85,478.44,41c0,13.22-6.07,25.13-14.51,31.95-7.48,6.17-16.14,8-24,8M453.1,21.55a18.65,18.65,0,0,0-13.43-5.63c-11.59,0-18.95,10.18-18.95,24,0,18.2,10.18,24.91,19.17,24.91s18.84-6.5,19.38-22.53c.33-8-1.84-16.13-6.17-20.79"
              />
              <path
                d="M488.48,2.38h30.75c12.57,0,23.72,0,30.44,9.64,2.92,4.33,4.33,10.51,4.33,15.7a27.47,27.47,0,0,1-2.6,11.92c-6.61,13.64-20.69,14-31.08,14.18H507.65v25H488.48Zm19.17,14.08V39.64h11.48c7.14,0,15.81-.22,15.81-12,0-11.15-9.64-11.15-15.16-11.15Z"
              />
              <polygon
                points="563.23 2.28 582.3 2.28 582.3 62.7 612.18 62.7 612.18 78.84 563.23 78.84 563.23 2.28"
              />
              <polygon
                points="621.02 2.38 677.55 2.38 677.55 17.22 640.09 17.22 640.09 31.08 675.06 31.08 675.06 45.59 640.09 45.59 640.09 63.78 680.91 63.78 680.91 78.84 621.02 78.84 621.02 2.38"
              />
              <path
                d="M701.55,55.88a24.06,24.06,0,0,0,7.37,6,31.55,31.55,0,0,0,14.73,3.68c7.58,0,14.08-3.58,14.08-8.88,0-6.07-7.69-7-13.32-7.8-4.23-.54-8.45-1.08-12.57-2-4.65-1-20.57-4.33-20.57-20.79C691.27,6.39,708.81.54,722,.54c17.65,0,27.18,8.56,33.79,14.51L741.73,25.13A34.74,34.74,0,0,0,734.15,19,27.56,27.56,0,0,0,721.7,15.6c-7.58,0-11.37,4.33-11.37,8,0,5.85,6.49,6.71,9.74,7.15,8.13,1,19.06,3,23.39,4.55,8.78,3.24,13.22,10.07,13.22,18.73a25.42,25.42,0,0,1-6.07,16.24c-6.93,8-18,10.29-28.7,10.29-21.55,0-30.1-10-34.87-15.48Z"
              />
              <path
                d="M12.6,116c0,2,1.91,3.49,4.72,4.11l5.57,1.13c6.59,1.35,14.92,3.37,14.92,11.93S29.2,146.53,20.7,146.53c-10.47,0-17.33-5.23-18.8-14h9.57c1.07,4.27,4.45,6.24,9.45,6.24,3.27,0,7-1.07,7-4.44,0-2.65-3.15-3.94-7.6-4.9l-5-1C8.71,127,2.69,123.85,2.69,116.54c0-8.33,9-12.22,16.94-12.22s15.59,3.49,17,12.5H27.11c-.95-3-3.93-4.79-8-4.79-3.72,0-6.47,1.41-6.47,3.94"
              />
              <polygon
                points="73.93 105 73.93 113.44 52.27 113.44 52.27 120.59 72.75 120.59 72.75 129.09 52.27 129.09 52.27 137.3 73.93 137.3 73.93 145.8 42.64 145.8 42.64 105 73.93 105"
              />
              <path
                d="M97.9,146.53c-12.72,0-20.43-8.1-20.43-21.16,0-12.89,8-21.05,20.71-21.05,10.25,0,17.45,6.65,18.86,15.93h-9.46c-1.07-5.57-5.18-8-9.73-8-5.74,0-10.19,4.78-10.19,13.11,0,8.61,4.45,13.22,10.3,13.22,4.16,0,8.78-1.8,9.9-8h9.46c-1.47,9.46-9.12,15.93-19.42,15.93"
              />
              <path
                d="M120.35,125.43c0-12.72,8.61-21.11,21.16-21.11s21.16,8.39,21.16,21.11-8.66,21.1-21.16,21.1-21.16-8.38-21.16-21.1m32.14,0c0-8.67-5-13.17-11-13.17s-11,4.5-11,13.17,5,13.16,11,13.16,11-4.5,11-13.16"
              />
              <polygon
                points="176.91 117.66 176.91 145.8 167.62 145.8 167.62 105 179.32 105 195.7 133.14 195.7 105 204.99 105 204.99 145.8 193.28 145.8 176.91 117.66"
              />
              <path
                d="M249.66,125.37c0,15.59-10.52,20.43-23.86,20.43H212.36V105H225.8c13.34,0,23.86,4.84,23.86,20.37M222,113.1v24.59h4c7.09,0,13.51-1.51,13.51-12.32S233.06,113.1,226,113.1Z"
              />
              <polygon
                points="295.86 137.3 295.86 145.8 266.66 145.8 266.66 105 276.28 105 276.28 137.3 295.86 137.3"
              />
              <path
                d="M295.07,125.43c0-12.72,8.62-21.11,21.16-21.11s21.16,8.39,21.16,21.11-8.66,21.1-21.16,21.1-21.16-8.38-21.16-21.1m32.14,0c0-8.67-5-13.17-11-13.17s-11,4.5-11,13.17,5,13.16,11,13.16,11-4.5,11-13.16"
              />
              <polygon
                points="356.86 134.99 366.26 105 376.05 105 362.21 145.8 350.95 145.8 337.22 105 347.46 105 356.86 134.99"
              />
              <polygon
                points="410.71 105 410.71 113.44 389.05 113.44 389.05 120.59 409.53 120.59 409.53 129.09 389.05 129.09 389.05 137.3 410.71 137.3 410.71 145.8 379.42 145.8 379.42 105 410.71 105"
              />
              <path
                d="M462.52,111.54a5.67,5.67,0,0,1,4,9.69l-2.66,2.67-13,13-13-13-2.55-2.54a5.72,5.72,0,0,1,0-8,5.72,5.72,0,0,1,8,0l2.55,2.54,4.95,5,4.95-5,2.66-2.67a5.66,5.66,0,0,1,4-1.65m0-7a12.65,12.65,0,0,0-9,3.71l-2.66,2.66-2.55-2.54a12.69,12.69,0,0,0-17.94,17.94l2.55,2.54,17.94,17.94,17.94-17.94,2.66-2.67a12.68,12.68,0,0,0-9-21.64"
              />
            </g>
          </g>
        </svg>
      </router-link>
    </div>
    <div class="interactive__items">
      <div class="shopify-items">
        <img
          src="./../assets/images/icon-cart.png"
          loading="lazy"
          alt="Votre panier"
          width="10px"
          class="show_modal"
        />
        <sup>0</sup>
      </div>
      <div class="js__toggle">
        <input type="checkbox" id="checkbox_toggle" />
        <label for="checkbox_toggle" class="responsive_nav">&#9776;</label>
      </div>
    </div>
  </header>

  <div class="modal-outer">
    <div class="modal-inner">
      <div class="modal-title">
        <img
          src="./../assets/images/icon-cart.png"
          loading="lazy"
          alt="Votre Panier"
          width="32"
        />
        <h4>Votre panier</h4>
        <span class="close">X</span>
      </div>
      <div class="modal-content">
        <p>Votre panier est vide</p>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  name: "MenuVue",
  props: {
    title: String,
  },
  mounted() {
    /**
     * Header light / dark
     */
    const header = document.querySelector(".header__container");
    //const logo = document.querySelector(".js_logo_svg");
    //logo.style.filter = "invert()";

    //Creation d'un timer afin de ne pas dÃ©clencher la fonction trop souvent

    let the_timer;
    window.addEventListener("scroll", () => {
      clearTimeout(the_timer);
      the_timer = setTimeout(() => {
        if (window.scrollY >= 1) {
          header.classList.add("light_nav");
          //logo.style.filter = null;
        } else {
          header.classList.remove("light_nav");
          //logo.style.filter = "invert()";
        }
      }, 75);
    });

    /**
     * Affiche / Masque la modale
     */
    const cart = document.querySelector(".shopify-items");
    const modal = document.querySelector(".modal-outer");

    function handleCartClick() {
      modal.classList.add("open");
    }

    function closeModal() {
      modal.classList.remove("open");
    }

    cart.addEventListener("click", handleCartClick);

    modal.addEventListener("click", function (event) {
      const isOutside = !event.target.closest(".modal-inner");
      if (isOutside) {
        closeModal();
      }
    });

    /**
     * Affiche masque le menu mobile
     */

    const burger = document.querySelector(".js__toggle label");
    const menu = document.querySelector(".menu__nav");

    function handleBurgerClick() {
      menu.classList.toggle("open");
    }

    burger.addEventListener("click", handleBurgerClick);
  },
};
</script>

<style scoped>
.header__container {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 2rem 1rem;
  height: 50px;
  transition: all ease 0.25s;
  position: fixed;
  top: 0;
  right: 0;
  left: 0;
  z-index: 10;
  color: var(--white);
}
.header__container a {
  font-family: "open_sansbold", sans-serif;
  text-decoration: none;
  text-transform: uppercase;
  font-weight: 700;
  transition: opacity ease-in-out 0.25s;
}
.header__container .menu__nav a:hover {
  opacity: 0.6;
}
.header__container.light_nav {
  background: var(--white);
}
.header__container.light_nav a {
  color: var(--dark);
}
.logo {
  display: inline;
  max-width: 200px;
}
.js_logo_svg {
  fill: var(--white);
  min-width: 200px;
}
.header__container.light_nav .logo {
  color: var(--dark);
}
.header__container.light_nav .js_logo_svg {
  fill: var(--dark);
}
.menu__nav {
  display: inline-flex;
  flex: 1 0 0;
}
.menu__nav ul li {
  display: inline;
  margin-right: 1rem;
}
.interactive__items {
  flex: 1 0 0;
  display: flex;
  justify-content: flex-end;
}
.interactive__items .shopify-items {
  display: flex;
  align-items: center;
  color: var(--white);
  cursor: pointer;
}

.header__container.light_nav .shopify-items {
  color: var(--dark);
}
.interactive__items img {
  min-width: 1.5rem;
  filter: invert();
}
.header__container.light_nav .interactive__items img {
  filter: invert(0);
}
.responsive_nav {
  color: var(--white);
  font-size: 2rem;
  display: none;
}
.header__container.light_nav .responsive_nav {
  color: var(--dark);
}
#checkbox_toggle {
  display: none;
}

/** MODAL */
.modal-outer {
  display: flex;
  background: rgba(0, 0, 0, 0.8);
  position: fixed;
  height: 100vh;
  width: 100vw;
  top: 0;
  left: 0;
  justify-content: center;
  align-items: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
  z-index: 12;
}
.modal-outer img {
  margin: auto;
}
.modal-outer.open {
  opacity: 1;
  pointer-events: all;
  z-index: 11;
}

.modal-inner {
  max-width: 600px;
  min-width: 400px;
  border-radius: 0px;
  background: white;
  transform: translateY(-200%);
  transition: transform 0.5s;
}
.modal-inner .modal-title {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  padding: 0;
  background: var(--dark);
}
.modal-inner .modal-title img {
  filter: invert();
  margin: 1rem;
}
.modal-inner .modal-title h4 {
  font-size: 1rem;
  color: var(--white);
  flex: 1;
}

.modal-content {
  padding: 1rem;
}

.modal-outer.open .modal-inner {
  transform: translateY(0);
}

@media (max-width: 768px) {
  .header__container a {
    color: var(--white);
  }
  .responsive_nav {
    display: block;
    margin-left: 1rem;
    margin-top: -0.5rem;
  }
  .menu__nav {
    transition: all ease-in-out 0.25s;
    position: absolute;
    top: 0;
    left: -100%;
    background: rgba(0, 0, 0, 0.8);
  }

  .menu__nav ul {
    width: 100%;
    padding: 1rem;
    margin-top: 3rem;
  }
  .menu__nav ul li {
    display: block;
  }
  .menu__nav.open {
    display: flex;
    flex-direction: row;
    left: 0;
    right: 30%;
    min-height: 100vh;
  }
  .menu__nav.open a {
    color: var(--white);
    font-size: 2rem;
  }
}
</style>
